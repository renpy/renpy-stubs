import renpy
from _typeshed import Incomplete
from renpy.compat.pickle import dumps as dumps, loads as loads
from typing import Any

script_version: Incomplete
BYTECODE_VERSION: int
RPYC_MAGIC: bytes
RPYC2_HEADER: bytes
OLD_BYTECODE_FILE: str
BYTECODE_FILE: Incomplete

class ScriptError(Exception): ...

class LabelNotFound(ScriptError, LookupError):
    name: Incomplete
    def __init__(self, label: str | tuple[Any, ...]) -> None: ...
    def get_suggestion(self): ...

def collapse_stmts(stmts): ...

class Script:
    key: Incomplete
    namemap: Incomplete
    all_stmts: Incomplete
    all_pycode: Incomplete
    all_pyexpr: Incomplete
    need_analysis: Incomplete
    need_compress: Incomplete
    record_pycode: bool
    bytecode_oldcache: Incomplete
    bytecode_newcache: Incomplete
    bytecode_dirty: bool
    translator: Incomplete
    serial: int
    digest: Incomplete
    loaded_rpy: bool
    backup_list: Incomplete
    duplicate_labels: Incomplete
    initcode: list[tuple[int, renpy.ast.Node]]
    loaded_scripts: Incomplete
    load_languages: Incomplete
    def __init__(self) -> None: ...
    def choose_backupdir(self): ...
    def make_backups(self) -> None: ...
    def classify_script_files(self, dirlist, script_files, module_files) -> None: ...
    script_files: Incomplete
    common_script_files: Incomplete
    module_files: Incomplete
    def scan_script_files(self) -> None: ...
    def clean_script_files(self) -> None: ...
    def script_filter(self, fn, dir): ...
    def sort_script_files(self): ...
    def load_script(self): ...
    def load_module(self, name): ...
    def include_module(self, name): ...
    def assign_names(self, stmts, fn) -> None: ...
    def merge_names(self, old_stmts, new_stmts, used_names) -> None: ...
    def load_string(self, filename, filedata, linenumber: int = 1): ...
    def finish_load(self, stmts, initcode, check_names: bool = True, filename=None): ...
    def write_rpyc_header(self, f) -> None: ...
    def write_rpyc_data(self, f, slot, data) -> None: ...
    def write_rpyc_md5(self, f, digest) -> None: ...
    def read_rpyc_data(self, f, slot): ...
    def static_transforms(self, stmts) -> None: ...
    def load_file(self, dir, fn): ...
    def load_appropriate_file(self, compiled, source_extensions, dir, fn, initcode) -> None: ...
    def init_bytecode(self) -> None: ...
    def update_bytecode(self) -> None: ...
    def save_bytecode(self) -> None: ...
    def lookup(self, label): ...
    def has_label(self, label): ...
    def lookup_or_none(self, label): ...
    def analyze(self) -> None: ...
    def compress(self) -> None: ...
    def report_duplicate_labels(self) -> None: ...
    def __del__(self) -> None: ...
