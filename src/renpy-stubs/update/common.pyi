from _typeshed import ReadableBuffer as ReadableBuffer
from typing import Any, BinaryIO, Literal

def hash_data(data: ReadableBuffer) -> str: ...
def hash_list(data: list[str]) -> str: ...
def dump(d: dict[str, Any]) -> None: ...

COMPRESS_NONE: Literal[0]
COMPRESS_ZLIB: Literal[1]

class Segment:
    offset: int
    size: int
    hash: str
    compressed: int
    def __init__(self, offset: int, size: int, hash: str, compressed: int) -> None: ...
    def __eq__(self, other: object) -> bool: ...
    def to_json(self) -> dict[str, Any]: ...
    @staticmethod
    def from_json(d: dict[str, Any]) -> Segment: ...

class Directory:
    name: str
    def __init__(self, name: str) -> None: ...
    def to_json(self) -> dict[str, Any]: ...
    @staticmethod
    def from_json(d: dict[str, Any]) -> Directory: ...

class File:
    name: str
    data_filename: str | None
    segments: list[Segment]
    mtime: float
    xbit: bool
    def __init__(
        self,
        name: str,
        data_filename: str | None = None,
        segments: list[Segment] | None = None,
        mtime: float = 0,
        xbit: bool = False,
    ) -> None: ...
    def to_json(self) -> dict[str, Any]: ...
    @staticmethod
    def from_json(d: dict[str, Any]) -> File: ...
    def scan_segments(self, f: BinaryIO, offset: int, size: int) -> None: ...
    def scan_rpa(self, f: BinaryIO, total_size: int) -> None: ...
    def scan(self) -> None: ...
    def add_data_filename(self, path: str) -> None: ...

class FileList:
    directories: list[Directory]
    files: list[File]
    blocks: list[File]
    def __init__(self) -> None: ...
    def to_json(self) -> dict[str, Any]: ...
    @staticmethod
    def from_json(d: dict[str, Any]) -> FileList: ...
    def to_current_json(self) -> dict[str, Any]: ...
    @staticmethod
    def from_current_json(d: dict[str, Any]) -> FileList: ...
    def add_directory(self, name: str) -> None: ...
    def add_file(self, name: str, path: str, xbit: bool) -> None: ...
    def scan(self, root: str, data_filename: bool = True) -> None: ...
    def encode(self) -> bytes: ...
    @staticmethod
    def decode(data: bytes) -> FileList: ...
