import renpy
from renpy.ast import (
    Node as Node,
    NodeLocation as NodeLocation,
    TranslateBlock as TranslateBlock,
    TranslateEarlyBlock as TranslateEarlyBlock,
    TranslatePython as TranslatePython,
    TranslateSay as TranslateSay,
)

class TranslateInfo:
    language: str | None
    identifier: str
    filename: str
    linenumber: int
    source: list[str]
    def __init__(self, node: TranslateSay) -> None: ...

class ScriptTranslator:
    languages: set[str]
    default_translates: dict[str, TranslateSay]
    language_translates: dict[tuple[str | None, str], TranslateSay]
    chain_worklist: list[tuple[str, str]]
    file_translates: dict[str, list[tuple[str | None, TranslateSay]]]
    strings: dict[str | None, StringTranslator]
    block: dict[str | None, list[TranslateBlock]]
    early_block: dict[str | None, list[TranslateEarlyBlock]]
    python: dict[str | None, list[TranslatePython]]
    additional_strings: dict[str, list[tuple[int, str]]]
    def __init__(self) -> None: ...
    def count_translates(self) -> int: ...
    def take_translates(self, nodes: list[renpy.ast.Node]) -> None: ...
    def chain_translates(self) -> None: ...
    def lookup_translate(self, identifier: str, alternate: str | None = None) -> tuple[renpy.ast.Node, bool]: ...
    def get_all_translates(self, identifier: str) -> dict[str | None, TranslateSay]: ...
    def get_translate_info(self, identifier: str, language: str | None) -> TranslateInfo | None: ...
    def requires_init(self, language: str | None) -> bool: ...

def encode_say_string(s: str) -> str: ...

class Restructurer:
    label: str | None
    alternate: str | None
    preexisting_identifiers: set[str]
    identifiers: set[str]
    def __init__(self, children: list[Node]) -> None: ...
    def id_exists(self, identifier: str) -> bool: ...
    def unique_identifier(self, label: str | None, digest: str) -> str: ...
    def create_translate(
        self, block: list[renpy.ast.Say | TranslateSay]
    ) -> tuple[renpy.ast.Translate, renpy.ast.EndTranslate]: ...
    def combine_translate(self, node: renpy.ast.Translate) -> Node: ...
    def callback(self, children: list[Node]) -> None: ...

def restructure(children: list[Node]) -> None: ...

update_translations: bool

def quote_unicode(s: str) -> str: ...

class StringTranslator:
    translations: dict[str, str]
    translation_loc: dict[str, NodeLocation]
    unknown: list[str]
    def __init__(self) -> None: ...
    def add(self, old: str, new: str, newloc: NodeLocation | None) -> None: ...
    def translate(self, old: str) -> str: ...
    def write_updated_strings(self, language: str | None) -> None: ...

def add_string_translation(language: str, old: str, new: str, newloc: NodeLocation | None) -> None: ...

Default: renpy.object.Sentinel

def translate_string(s: str, language: str | None | renpy.object.Sentinel = ...) -> str: ...
def write_updated_strings() -> None: ...
def load_rpt(fn: str) -> None: ...
def load_all_rpts() -> None: ...

style_backup: renpy.style.StyleBackup | None

def init_translation() -> None: ...

old_language: str
deferred_styles: list[renpy.ast.Style]

def old_change_language(tl: ScriptTranslator, language: str | None, changed: bool) -> None: ...
def new_change_language(tl: ScriptTranslator, language: str | None, changed: bool) -> None: ...
def clean_data() -> None: ...
def change_language(language: str | None, force: bool = False, rebuild: bool = False) -> None: ...
def check_language() -> None: ...
def get_translation_identifier() -> str | None: ...
def get_translation_info(identifier: str | None = None, language: str | None = None) -> TranslateInfo | None: ...
def known_languages() -> set[str]: ...

locales: dict[str, str]

def detect_user_locale() -> tuple[str, str] | tuple[None, None]: ...

# Generated by scripts/relative_imports.py, do not edit below this line.
from . import dialogue as dialogue
from . import extract as extract
from . import generation as generation
from . import merge as merge
from . import scanstrings as scanstrings
