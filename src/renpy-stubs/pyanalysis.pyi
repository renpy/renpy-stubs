import ast
from _typeshed import Incomplete as Incomplete
from renpy.compat.pickle import dumps as dumps, loads as loads
from renpy.python import py_compile as py_compile

always_constants: Incomplete
pure_functions: Incomplete
constants: Incomplete
not_constants: Incomplete
local_constants: Incomplete

def const(name) -> None: ...
def not_const(name) -> None: ...
def pure(fn): ...
def import_from(from_module_name, in_module_name, *names): ...

class Control:
    const: Incomplete
    loop: Incomplete
    imagemap: Incomplete
    def __init__(self, const, loop, imagemap) -> None: ...

GLOBAL_CONST: int
LOCAL_CONST: int
NOT_CONST: int

class DeltaSet:
    base: Incomplete
    added: Incomplete
    removed: Incomplete
    changed: bool
    def __init__(self, base, copy=None) -> None: ...
    def add(self, v) -> None: ...
    def discard(self, v) -> None: ...
    def __contains__(self, v) -> bool: ...
    def copy(self): ...
    def __iter__(self): ...

class Analysis:
    parent: Incomplete
    children: Incomplete
    not_constant: Incomplete
    local_constant: Incomplete
    global_constant: Incomplete
    pure_functions: Incomplete
    control: Incomplete
    control_stack: Incomplete
    def __init__(self, parent=None) -> None: ...
    def get_child(self, identifier): ...
    def push_control(self, const: bool = True, loop: bool = False, imagemap: bool = False) -> None: ...
    def pop_control(self): ...
    def imagemap(self): ...
    def exit_loop(self) -> None: ...
    def at_fixed_point(self): ...
    def mark_constant(self, name) -> None: ...
    def mark_not_constant(self, name) -> None: ...
    def is_constant(self, node): ...
    def is_constant_expr(self, expr): ...
    def python(self, code) -> None: ...
    def parameters(self, parameters) -> None: ...

class PyAnalysis(ast.NodeVisitor):
    analysis: Incomplete
    def __init__(self, analysis) -> None: ...
    def visit_Name(self, node) -> None: ...
    def visit_NamedExpr(self, node) -> None: ...
    def visit_FunctionDef(self, node) -> None: ...
    def visit_AsyncFunctionDef(self, node) -> None: ...
    def visit_ClassDef(self, node) -> None: ...
    def visit_Assign(self, node) -> None: ...
    def visit_AugAssign(self, node) -> None: ...
    def visit_AnnAssign(self, node) -> None: ...
    def visit_For(self, node: ast.For | ast.AsyncFor) -> None: ...
    def visit_AsyncFor(self, node): ...
    def visit_While(self, node) -> None: ...
    def visit_If(self, node) -> None: ...
    def visit_withitem(self, node) -> None: ...
    def visit_MatchMapping(self, node) -> None: ...
    def visit_MatchStar(self, node) -> None: ...
    def visit_MatchAs(self, node) -> None: ...
    def visit_Try(self, node) -> None: ...
    def visit_Break(self, node) -> None: ...
    def visit_Continue(self, node) -> None: ...

class CompilerCache:
    ast_eval_cache: Incomplete
    ast_exec_cache: Incomplete
    updated: bool
    version: int
    def __init__(self) -> None: ...
    def ast_eval_literal(self, expr): ...
    def ast_eval(self, expr): ...
    def ast_exec(self, code): ...

ccache: Incomplete
new_ccache: Incomplete
CACHE_FILENAME: str

def load_cache() -> None: ...
def save_cache() -> None: ...
